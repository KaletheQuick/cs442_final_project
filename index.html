<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Ungoosed Title Game</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
	</head>
	<body>
    <canvas id = "the-canvas" class="canv" width = "1200" height = "600"></canvas>
    <div class="container controlls">
        <div class="a_box">
            <h3>UI Container</h3>
            <h4 style="text-align: center;">Section 1</h4>                
            <hr class="headerRule">
            <div style="box-shadow: 0 0 5px white inset;border-radius: 10px;padding:10px;background-image: linear-gradient(to bottom right, rgba(0, 0, 0, 0.5), rgba(255, 255, 255, 0.3));" >
				<ul id="scene_hierarchy">

				</ul>
            </div>
            <h4 style="text-align: center;">Section 2</h4>                
            <hr class="headerRule">
            <div class="grid-container" >
                <div class="butt" onclick='load_text_resource("sphere");'>Button</div>
                <div class="butt" onclick='load_text_resource("koun");'>button</div>
            </div>
        </div>
    </div>
    <div class="container controlls" style="right: 25px;">
        <div class="a_box" id="inspector">
        </div>   
		<div style="display: none;">
            <h4 style="text-align: center;">Frustromo</h4>                
            <hr class="headerRule">
            <label for="cam_fov">FOV:</label>
            <input style="width: 100%;" type="range"  name="cam_fov"  id="cam_fov"  min="5"  max="180"  step="1"  value="60" />
            <label for="cam_clip_near">Near:</label>
            <input style="width: 100%;" type="range"  name="cam_clip_near"  id="cam_clip_near"  min="1"  max="1000"  step="1"  value="90" />
            <label for="cam_clip_far">Far:</label>
            <input style="width: 100%;" type="range"  name="cam_clip_far"  id="cam_clip_far"  min="1"  max="1000"  step="1"  value="149" />

            <h4 style="text-align: center;">Lights</h4>                
            <hr class="headerRule">
            <label for="amb_pwr">Ambient Power:</label>
            <input style="width: 100%;" type="range"  name="amb_pwr"  id="amb_pwr"  min="0"  max="1"  step="0.01"  value="0.3" />
        
            <label for="sun_pwr">Sun Power:</label>
            <input style="width: 100%;" type="range"  name="sun_pwr"  id="sun_pwr"  min="0"  max="1"  step="0.01"  value="0.3" />
        
            <label for="spk_pwr">Specular Power:</label>
            <input style="width: 100%;" type="range"  name="spk_pwr"  id="spk_pwr"  min="0"  max="5"  step="0.01"  value="0.5" />
            <label for="shn_pwr">Shinyness:</label>
            <input style="width: 100%;" type="range"  name="shn_pwr"  id="shn_pwr"  min="0"  max="256"  step="1"  value="32" />
            <label for="shn_pwr">Kolourgh:</label>
            <input type="color" id="light_color" name="light_color" value="#ff0000">
		</div>           
    </div>
        
	<!-- Debug out console TODO make work -->
	<div id="console" class="debout">
		Debug Out
		<p id="debout" ></p>
	</div>
	
    </body>

    <script src = "lib/lib.js"></script>
    <script src = "lib/matrix.js"></script>
    <script src = "lib/vector.js"></script>
    <script src = "lib/mesh.js"></script>
    <script src = "scripts/COMPONENT.js"></script>
    <script src = "scripts/components/camera.js"></script>
    <script src = "scripts/components/mesh_renderer.js"></script>
    <script src = "scripts/components/debugMovement.js"></script>
    <script src = "scripts/components/debugRotator.js"></script>
    <script src = "scripts/components/camera_motor.js"></script>
    <script src = "scripts/node.js"></script>
    <script src = "scripts/input_system.js"></script>
    <script src = "scripts/shaders.js"></script>
    <!-- Main Scripts, must be bottom of load order -->
    <script src = "lib/renderer.js"></script>
    <script src = "scripts/main.js"></script>
    <script>
        kataras_hair();

		// Testing scene hierarchy and inspector things. 
		let hierarchy = document.getElementById("scene_hierarchy");
		hierarchy.innerHTML = ""; // clear
		hierarchy.appendChild(scene.ui_hierachy_rep());

		function inspect_node(node) {
			let insp = document.getElementById("inspector");
			inspector.innerHTML = ""; // clear
			let returnable = document.createElement("div");
			// name 
			let header = document.createElement("h2");
            header.className = "inspectionLabel"
			header.innerText = node.name;
			returnable.appendChild(header);
			// local_position
			let nodeTransform = document.createElement("fieldset");
			let nt_lgnd = document.createElement("legend");
			nt_lgnd.innerText = "Node Transform";
			nodeTransform.appendChild(nt_lgnd);
			nodeTransform.innerHTML += `<table><tr><td>POS:</td><td> ${node.position.x.toFixed(3)},${node.position.y.toFixed(3)},${node.position.z.toFixed(3)}<tr><td> ROT:</td><td> ${node.rotation.x.toFixed(3)},${node.rotation.x.toFixed(3)},${node.rotation.x.toFixed(3)}</td></tr></table>`
			returnable.appendChild(nodeTransform);
			// components 
			node.components.forEach(component => {
				let c_fst = document.createElement("fieldset");
				let c_lgnd = document.createElement("legend");
				c_lgnd.innerHTML = "<b>" +component.type.typestring + "</b>";
				c_fst.appendChild(c_lgnd);
				for (let key in component) {
					if(key == "type" || key == "node") {continue;}
					c_fst.innerHTML += `<dt><i>${key}:</i></dt><dd>${component[key]}</dd>`;
				}
				returnable.appendChild(c_fst);
			});


			// pop it on there 
			insp.appendChild(returnable);
		}
    </script>
</html>
